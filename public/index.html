<!DOCTYPE html>
<html>
  <head>
    <title>Projektet - Vejr & Klima</title>
    <h2 id="stor-overskrift">Projekt - Visualisering af vejr og Klima</h2>
    <script src="d3.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <script>
      d3.json("/api/helloQuery", {
        method: "POST",
      }).then(function (response) {
        const data = response.data; // Hent data ud af response
        console.log(data);
        
        const w = 850;
        const h = 850;
        const bottomPadding = 20; // Plads til x-akse i bunden
        const sidePadding = 10; // Plads til y-akse senere

        // Scale-funktioner
        const yScale = d3.scaleLinear() // Linæer skalering
          .domain([0, d3.max(data)])
          .range([0, h - bottomPadding]);

        const xScale = d3.scaleLinear() // Linæer skalering
          .domain([0, data.length])
          .range([sidePadding, w - sidePadding]);

        // Lav SVG element
        const svg = d3
          .select("body")
          .append("svg")
          .attr("width", w)
          .attr("height", h);

        // Lave x-akse med tal
        const xAxis = d3.axisBottom().scale(xScale);
        svg.append("g") // "g" er en SVG Group
          // Aksen flyttes på plads med 'transform'
          .attr("transform", "translate(0," + (h - bottomPadding) + ")")
          // d3.js laver sin magi
          .call(xAxis);

        // Indsæt tekst fra postgres query som eksempel
        svg.selectAll("circle")
          .data(data)
          .enter()
          .append("circle")
          .attr("cx", function (d, i) {
            return xScale(i);
          })
          .attr("cy", function (d) {
            return h - yScale(d) - bottomPadding;
          })
          .attr("r", 10);
      });
    </script>
  </body>
</html>
